---
phase: 09-complexity-levels
plan: 01
type: execute
wave: 1
depends_on:
  - 06-01
files_modified:
  - lib/actions/meals.ts
  - components/add-meal-form.tsx
autonomous: true
---

# 09-01 Plan: Complexity Input in Create/Edit

## Objective
Add user-editable complexity to meal create and edit flows, defaulting to `MEDIUM` when unspecified.

## Scope
- Extend meal server actions to accept optional `complexity`.
- Add a compact complexity selector in `AddMealForm`.
- Ensure edit flow can update complexity.

## Tasks
1. Add `complexity` enum validation in `lib/actions/meals.ts` via Zod.
2. Persist selected complexity in `addMeal` and `updateMeal`.
3. Add complexity input controls to `components/add-meal-form.tsx`.

## Verification
- Creating meal with each complexity persists correctly.
- Existing create path without explicit complexity still saves `MEDIUM`.
- `pnpm test`, `pnpm lint`, `pnpm build` all pass.

## Success Criteria
- User can set complexity during create/edit.
- No regression to current meal CRUD behavior.
