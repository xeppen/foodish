---
phase: 10-progressive-swap
plan: 01
type: execute
wave: 1
depends_on:
  - 07-01
  - 08-03
  - 09-03
files_modified:
  - lib/actions/plans.ts
  - lib/actions/plans.test.ts
autonomous: true
---

# 10-01 Plan: Swap Options API + Choice-based Swap Action

## Objective
Create backend actions for preloaded swap candidates and explicit swap-by-choice flow.

## Scope
- Add `getSwapOptions(day, filters)` server action.
- Add `swapDayMealWithChoice(day, mealId)` server action.
- Keep existing `swapDayMeal(day)` as random convenience path.

## Verification
- Swap options exclude currently planned meals.
- Filters support complexity, rating, and recency.
- Choice-based swap writes UsageHistory and updates plan.
